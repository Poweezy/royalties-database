<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Component Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f7f9fc;
        }
        h1, h2 {
            color: #1a365d;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        .test-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .test-card h3 {
            margin-top: 0;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        .status {
            padding: 5px 10px;
            border-radius: 4px;
            display: inline-block;
            margin-top: 10px;
        }
        .status.success {
            background-color: #d4edda;
            color: #155724;
        }
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
        }
        .component-content {
            height: 200px;
            overflow: auto;
            background: #f5f5f5;
            border: 1px solid #ddd;
            padding: 10px;
            margin-top: 10px;
            font-size: 12px;
        }
        button {
            background-color: #007bff;
            border: none;
            color: white;
            padding: 5px 15px;
            cursor: pointer;
            border-radius: 4px;
        }
        button:hover {
            background-color: #0069d9;
        }
    </style>
</head>
<body>
    <h1>Mining Royalties Manager - Component Test</h1>
    <p>This page tests the availability of component files in different locations.</p>
    
    <h2>Component Loading Test</h2>
    <div class="test-grid" id="test-grid">
        <!-- Component test cards will be generated here -->
    </div>

    <script>
        // Components to test
        const components = [
            'sidebar',
            'dashboard',
            'user-management',
            'royalty-records',
            'contract-management',
            'audit-dashboard',
            'reporting-analytics',
            'communication',
            'notifications',
            'compliance',
            'regulatory-management',
            'profile'
        ];
        
        // Paths to test
        const paths = [
            'components',
            'html/components',
            'templates'
        ];
        
        // Create test cards
        function createTests() {
            const grid = document.getElementById('test-grid');
            
            components.forEach(component => {
                const card = document.createElement('div');
                card.className = 'test-card';
                card.innerHTML = `
                    <h3>${component}</h3>
                    <div id="${component}-results">
                        <p>Testing paths...</p>
                    </div>
                    <div class="component-content" id="${component}-content">
                        <em>Component content will appear here when loaded successfully</em>
                    </div>
                    <button onclick="testComponent('${component}')">Re-Test</button>
                `;
                grid.appendChild(card);
                
                // Run test
                testComponent(component);
            });
        }
        
        // Test component across all paths
        async function testComponent(component) {
            const resultsElement = document.getElementById(`${component}-results`);
            const contentElement = document.getElementById(`${component}-content`);
            
            resultsElement.innerHTML = '<p>Testing paths...</p>';
            contentElement.innerHTML = '<em>Component content will appear here when loaded successfully</em>';
            
            let html = '';
            let anySuccess = false;
            
            for (const path of paths) {
                const url = `${path}/${component}.html`;
                try {
                    const response = await fetch(url);
                    if (response.ok) {
                        const content = await response.text();
                        if (content.trim() === '') {
                            html += `<p>${path}: <span class="status error">Empty</span></p>`;
                        } else {
                            html += `<p>${path}: <span class="status success">Success</span></p>`;
                            contentElement.innerHTML = `<pre>${escapeHtml(content.substring(0, 500))}${content.length > 500 ? '...' : ''}</pre>`;
                            anySuccess = true;
                        }
                    } else {
                        html += `<p>${path}: <span class="status error">${response.status}</span></p>`;
                    }
                } catch (error) {
                    html += `<p>${path}: <span class="status error">Error: ${error.message}</span></p>`;
                }
            }
            
            resultsElement.innerHTML = html;
            
            if (!anySuccess) {
                contentElement.innerHTML = '<p style="color: red;">Failed to load component from any path</p>';
            }
        }
        
        // Helper to escape HTML
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
        
        // Initialize tests
        window.onload = createTests;
    </script>
</body>
</html>
