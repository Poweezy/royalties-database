<div class="page-header">
  <div class="page-title">
    <h1>⚖️ Regulatory Management</h1>
    <p>Manage mining regulations, compliance requirements, and legal framework updates</p>
  </div>
  <div class="page-actions">
    <button class="btn btn-info" id="refresh-regulations-btn">
      <i class="fas fa-sync-alt"></i> Refresh Data
    </button>
    <button class="btn btn-success" id="add-regulation-btn">
      <i class="fas fa-plus"></i> Add Regulation
    </button>
    <button class="btn btn-warning" id="compliance-check-btn">
      <i class="fas fa-shield-check"></i> Check Compliance
    </button>
  </div>
</div>

<!-- Regulatory Status Overview -->
<div class="charts-grid">
  <div class="metric-card card">
    <div class="card-header">
      <h3><i class="fas fa-book-open"></i> Active Regulations</h3>
    </div>
    <div class="card-body">
      <p id="active-regulations">24</p>
      <small class="trend-info">
        <i class="fas fa-info-circle"></i> 3 updated this month
      </small>
    </div>
  </div>

  <div class="metric-card card">
    <div class="card-header">
      <h3><i class="fas fa-exclamation-triangle"></i> Compliance Issues</h3>
    </div>
    <div class="card-body">
      <p id="compliance-issues">5</p>
      <small class="trend-warning">
        <i class="fas fa-clock"></i> 2 critical, 3 minor
      </small>
    </div>
  </div>

  <div class="metric-card card">
    <div class="card-header">
      <h3><i class="fas fa-calendar-alt"></i> Upcoming Deadlines</h3>
    </div>
    <div class="card-body">
      <p id="upcoming-deadlines">8</p>
      <small class="trend-warning">
        <i class="fas fa-bell"></i> Next: 3 days
      </small>
    </div>
  </div>

  <div class="metric-card card">
    <div class="card-header">
      <h3><i class="fas fa-percentage"></i> Overall Compliance</h3>
    </div>
    <div class="card-body">
      <p id="overall-regulatory-compliance">92%</p>
      <div class="mini-progress">
        <div class="progress-bar" style="width: 92%;"></div>
      </div>
    </div>
  </div>
</div>

<!-- Current Regulations -->
<div class="card">
  <div class="card-header">
    <h5><i class="fas fa-gavel"></i> Current Regulations</h5>
    <div class="card-actions">
      <select class="metric-period" id="regulation-category-filter">
        <option value="all">All Categories</option>
        <option value="mining-rights">Mining Rights</option>
        <option value="environmental">Environmental</option>
        <option value="safety">Safety & Health</option>
        <option value="taxation">Taxation</option>
        <option value="reporting">Reporting</option>
      </select>
    </div>
  </div>
  <div class="card-body">
    <div class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th>Regulation ID</th>
            <th>Title</th>
            <th>Category</th>
            <th>Effective Date</th>
            <th>Compliance Status</th>
            <th>Next Review</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>REG-2024-001</td>
            <td>Mining Royalties Rate Structure</td>
            <td>Taxation</td>
            <td>2024-01-01</td>
            <td><span class="status-badge paid">Compliant</span></td>
            <td>2024-12-31</td>
            <td>
              <div class="btn-group">
                <button class="btn btn-sm btn-info" onclick="viewRegulation('REG-2024-001')">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="btn btn-sm btn-warning" onclick="editRegulation('REG-2024-001')">
                  <i class="fas fa-edit"></i>
                </button>
              </div>
            </td>
          </tr>
          <tr>
            <td>REG-2023-045</td>
            <td>Environmental Impact Assessment</td>
            <td>Environmental</td>
            <td>2023-06-15</td>
            <td><span class="status-badge pending">Pending Review</span></td>
            <td>2024-03-15</td>
            <td>
              <div class="btn-group">
                <button class="btn btn-sm btn-info" onclick="viewRegulation('REG-2023-045')">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="btn btn-sm btn-warning" onclick="editRegulation('REG-2023-045')">
                  <i class="fas fa-edit"></i>
                </button>
              </div>
            </td>
          </tr>
          <tr>
            <td>REG-2023-032</td>
            <td>Monthly Production Reporting</td>
            <td>Reporting</td>
            <td>2023-03-01</td>
            <td><span class="status-badge overdue">Non-Compliant</span></td>
            <td>2024-02-28</td>
            <td>
              <div class="btn-group">
                <button class="btn btn-sm btn-info" onclick="viewRegulation('REG-2023-032')">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="btn btn-sm btn-danger" onclick="addressCompliance('REG-2023-032')">
                  <i class="fas fa-exclamation-triangle"></i>
                </button>
              </div>
            </td>
          </tr>
          <tr>
            <td>REG-2023-018</td>
            <td>Worker Safety Standards</td>
            <td>Safety & Health</td>
            <td>2023-01-15</td>
            <td><span class="status-badge paid">Compliant</span></td>
            <td>2024-06-15</td>
            <td>
              <div class="btn-group">
                <button class="btn btn-sm btn-info" onclick="viewRegulation('REG-2023-018')">
                  <i class="fas fa-eye"></i>
                </button>
                <button class="btn btn-sm btn-warning" onclick="editRegulation('REG-2023-018')">
                  <i class="fas fa-edit"></i>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Compliance Tracking -->
<div class="card">
  <div class="card-header">
    <h5><i class="fas fa-chart-line"></i> Compliance Tracking</h5>
  </div>
  <div class="card-body">
    <div class="charts-grid">
      <div class="compliance-category">
        <h6>Mining Rights</h6>
        <div class="mini-progress">
          <div class="progress-bar" style="width: 95%; background: var(--success-color);"></div>
        </div>
        <small>95% Compliant (19/20)</small>
      </div>
      <div class="compliance-category">
        <h6>Environmental</h6>
        <div class="mini-progress">
          <div class="progress-bar" style="width: 88%; background: var(--warning-color);"></div>
        </div>
        <small>88% Compliant (15/17)</small>
      </div>
      <div class="compliance-category">
        <h6>Safety & Health</h6>
        <div class="mini-progress">
          <div class="progress-bar" style="width: 92%; background: var(--success-color);"></div>
        </div>
        <small>92% Compliant (23/25)</small>
      </div>
      <div class="compliance-category">
        <h6>Taxation</h6>
        <div class="mini-progress">
          <div class="progress-bar" style="width: 100%; background: var(--success-color);"></div>
        </div>
        <small>100% Compliant (8/8)</small>
      </div>
      <div class="compliance-category">
        <h6>Reporting</h6>
        <div class="mini-progress">
          <div class="progress-bar" style="width: 85%; background: var(--danger-color);"></div>
        </div>
        <small>85% Compliant (11/13)</small>
      </div>
    </div>
  </div>
</div>

<!-- Upcoming Deadlines -->
<div class="card">
  <div class="card-header">
    <h5><i class="fas fa-calendar-times"></i> Upcoming Compliance Deadlines</h5>
  </div>
  <div class="card-body">
    <div class="alerts-container">
      <div class="alert-item urgent">
        <div class="alert-icon">
          <i class="fas fa-calendar-exclamation"></i>
        </div>
        <div class="alert-content">
          <h6>Quarterly Environmental Report</h6>
          <p>Due: February 15, 2024 (3 days remaining)</p>
          <small>Regulation: REG-2023-045 | Category: Environmental</small>
        </div>
        <div class="alert-actions">
          <button class="btn btn-sm btn-success" onclick="submitReport('REG-2023-045')">Submit Report</button>
          <button class="btn btn-sm btn-info" onclick="viewRequirements('REG-2023-045')">View Requirements</button>
        </div>
      </div>
      
      <div class="alert-item warning">
        <div class="alert-icon">
          <i class="fas fa-file-alt"></i>
        </div>
        <div class="alert-content">
          <h6>Annual Safety Audit</h6>
          <p>Due: February 28, 2024 (16 days remaining)</p>
          <small>Regulation: REG-2023-018 | Category: Safety & Health</small>
        </div>
        <div class="alert-actions">
          <button class="btn btn-sm btn-warning" onclick="scheduleAudit('REG-2023-018')">Schedule Audit</button>
          <button class="btn btn-sm btn-info" onclick="viewRequirements('REG-2023-018')">View Requirements</button>
        </div>
      </div>
      
      <div class="alert-item info">
        <div class="alert-icon">
          <i class="fas fa-clipboard-check"></i>
        </div>
        <div class="alert-content">
          <h6>Mining License Renewal</h6>
          <p>Due: March 31, 2024 (48 days remaining)</p>
          <small>Regulation: REG-2024-001 | Category: Mining Rights</small>
        </div>
        <div class="alert-actions">
          <button class="btn btn-sm btn-primary" onclick="startRenewal('REG-2024-001')">Start Renewal</button>
          <button class="btn btn-sm btn-info" onclick="viewRequirements('REG-2024-001')">View Requirements</button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Regulatory Updates -->
<div class="card">
  <div class="card-header">
    <h5><i class="fas fa-newspaper"></i> Recent Regulatory Updates</h5>
    <div class="card-actions">
      <button class="btn btn-sm btn-primary" onclick="subscribeToUpdates()">
        <i class="fas fa-bell"></i> Subscribe to Updates
      </button>
    </div>
  </div>
  <div class="card-body">
    <div class="activity-list">
      <div class="activity-item">
        <div class="activity-icon">
          <i class="fas fa-plus-circle" style="color: var(--success-color);"></i>
        </div>
        <div class="activity-content">
          <p><strong>New Regulation:</strong> Updated royalty calculation methodology</p>
          <small>Published: February 8, 2024 | Effective: April 1, 2024</small>
        </div>
      </div>
      
      <div class="activity-item">
        <div class="activity-icon">
          <i class="fas fa-edit" style="color: var(--warning-color);"></i>
        </div>
        <div class="activity-content">
          <p><strong>Amendment:</strong> Environmental impact assessment procedures</p>
          <small>Published: February 5, 2024 | Effective: March 1, 2024</small>
        </div>
      </div>
      
      <div class="activity-item">
        <div class="activity-icon">
          <i class="fas fa-info-circle" style="color: var(--info-color);"></i>
        </div>
        <div class="activity-content">
          <p><strong>Notice:</strong> Extended deadline for quarterly safety reports</p>
          <small>Published: February 3, 2024 | New Deadline: March 15, 2024</small>
        </div>
      </div>
      
      <div class="activity-item">
        <div class="activity-icon">
          <i class="fas fa-exclamation-triangle" style="color: var(--danger-color);"></i>
        </div>
        <div class="activity-content">
          <p><strong>Alert:</strong> New penalty structure for late submissions</p>
          <small>Published: January 30, 2024 | Effective: February 15, 2024</small>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// Regulatory Management Functions
function viewRegulation(regulationId) {
  if (window.notificationManager) {
    window.notificationManager.show(`Opening regulation ${regulationId} details`, 'info');
  }
}

function editRegulation(regulationId) {
  if (window.notificationManager) {
    window.notificationManager.show(`Editing regulation ${regulationId}`, 'info');
  }
}

function addressCompliance(regulationId) {
  if (window.notificationManager) {
    window.notificationManager.show(`Addressing compliance issue for ${regulationId}`, 'warning');
  }
}

function submitReport(regulationId) {
  if (window.notificationManager) {
    window.notificationManager.show(`Opening report submission for ${regulationId}`, 'info');
  }
}

function viewRequirements(regulationId) {
  if (window.notificationManager) {
    window.notificationManager.show(`Displaying requirements for ${regulationId}`, 'info');
  }
}

function scheduleAudit(regulationId) {
  if (window.notificationManager) {
    window.notificationManager.show(`Scheduling audit for ${regulationId}`, 'info');
  }
}

function startRenewal(regulationId) {
  if (window.notificationManager) {
    window.notificationManager.show(`Starting renewal process for ${regulationId}`, 'info');
  }
}

function subscribeToUpdates() {
  if (window.notificationManager) {
    window.notificationManager.show('Subscribing to regulatory updates...', 'info');
    setTimeout(() => {
      window.notificationManager.show('Successfully subscribed to regulatory updates', 'success');
    }, 1000);
  }
}

// Initialize regulatory management
document.addEventListener('DOMContentLoaded', function() {
  const categoryFilter = document.getElementById('regulation-category-filter');
  if (categoryFilter) {
    categoryFilter.addEventListener('change', function() {
      if (window.notificationManager) {
        window.notificationManager.show(`Filtering regulations by ${this.value}`, 'info');
      }
    });
  }
  
  const addRegulationBtn = document.getElementById('add-regulation-btn');
  if (addRegulationBtn) {
    addRegulationBtn.addEventListener('click', function() {
      if (window.notificationManager) {
        window.notificationManager.show('Opening new regulation form...', 'info');
      }
    });
  }
  
  const complianceCheckBtn = document.getElementById('compliance-check-btn');
  if (complianceCheckBtn) {
    complianceCheckBtn.addEventListener('click', function() {
      if (window.notificationManager) {
        window.notificationManager.show('Running compliance check...', 'info');
        setTimeout(() => {
          window.notificationManager.show('Compliance check completed - 5 issues found', 'warning');
        }, 2000);
      }
    });
  }
});
</script>
