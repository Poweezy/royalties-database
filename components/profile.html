<div class="page-header">
    <div class="page-title">
        <h1><i class="fas fa-user"></i> My Profile</h1>
        <p>Manage your account settings and preferences</p>
    </div>
    <div class="page-actions">
        <button class="btn btn-primary" id="edit-profile-btn">
            <i class="fas fa-edit"></i> Edit Profile
        </button>
        <button class="btn btn-warning" id="change-password-btn">
            <i class="fas fa-lock"></i> Change Password
        </button>
    </div>
</div>

<div class="charts-grid">
    <div class="card">
        <div class="card-header">
            <h5><i class="fas fa-user"></i> Personal Information</h5>
        </div>
        <div class="card-body">
            <div class="details-section">
                <div class="details-row">
                    <span class="label">Username:</span>
                    <span class="value" id="profile-username">admin</span>
                </div>
                <div class="details-row">
                    <span class="label">Email:</span>
                    <span class="value" id="profile-email">admin@eswacaa.sz</span>
                </div>
                <div class="details-row">
                    <span class="label">Role:</span>
                    <span class="value">
                        <span id="profile-role" class="status-badge administrator">Administrator</span>
                    </span>
                </div>
                <div class="details-row">
                    <span class="label">Department:</span>
                    <span class="value" id="profile-department">Management</span>
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h5>üîê Security Settings</h5>
        </div>
        <div class="card-body">
            <div class="details-section">
                <div class="details-row">
                    <span class="label">Two-Factor Authentication:</span>
                    <span class="value">
                        <button class="btn btn-sm btn-secondary">Enable</button>
                    </span>
                </div>
                <div class="details-row">
                    <span class="label">Last Login:</span>
                    <span class="value" id="profile-last-login">Today at 14:32</span>
                </div>
                <div class="details-row">
                    <span class="label">Login Sessions:</span>
                    <span class="value text-success">1 Active</span>
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h5>‚öôÔ∏è Preferences</h5>
        </div>
        <div class="card-body">
            <div class="form-section">
                <div class="form-group">
                    <label for="language-select">Language:</label>
                    <select id="language-select" class="form-control">
                        <option value="en" selected>English</option>
                        <option value="ss">siSwati</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="date-format-select">Date Format:</label>
                    <select id="date-format-select" class="form-control">
                        <option value="dd/mm/yyyy" selected>DD/MM/YYYY</option>
                        <option value="mm/dd/yyyy">MM/DD/YYYY</option>
                        <option value="yyyy-mm-dd">YYYY-MM-DD</option>
                    </select>
                </div>
                <div class="form-group">
                    <div class="form-check">
                        <input type="checkbox" id="email-notifications" class="form-check-input" checked>
                        <label for="email-notifications" class="form-check-label">Email Notifications</label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-header">
            <h5><i class="fas fa-chart-bar"></i> Activity Summary</h5>
        </div>
        <div class="card-body">
            <div class="stats-grid">
                <div class="stat-item">
                    <h3 class="stat-number text-primary">47</h3>
                    <small class="stat-label">Total Logins</small>
                </div>
                <div class="stat-item">
                    <h3 class="stat-number text-success">15</h3>
                    <small class="stat-label">Actions Today</small>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h5><i class="fas fa-history"></i> Recent Activity</h5>
    </div>
    <div class="card-body">
        <div class="activity-list">
            <div class="activity-item">
                <span class="activity-text">Logged into system</span>
                <small class="activity-time">Today at 14:32</small>
            </div>
            <div class="activity-item">
                <span class="activity-text">Viewed dashboard analytics</span>
                <small class="activity-time">Today at 14:30</small>
            </div>
            <div class="activity-item">
                <span class="activity-text">Generated monthly report</span>
                <small class="activity-time">Yesterday at 16:45</small>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const editProfileBtn = document.getElementById('edit-profile-btn');
    const changePasswordBtn = document.getElementById('change-password-btn');
    
    // Update profile information with current user data
    if (window.royaltiesApp && window.royaltiesApp.authManager) {
        const currentUser = window.royaltiesApp.authManager.getCurrentUser();
        if (currentUser) {
            document.getElementById('profile-username').textContent = currentUser.username;
            document.getElementById('profile-role').textContent = currentUser.role;
            document.getElementById('profile-department').textContent = currentUser.department;
            
            const lastLogin = new Date(currentUser.lastLogin);
            document.getElementById('profile-last-login').textContent = lastLogin.toLocaleString();
        }
    }
    
    if (editProfileBtn) {
        editProfileBtn.addEventListener('click', function() {
            if (window.notificationManager) {
                window.notificationManager.show('Profile editing functionality would open here', 'info');
            }
        });
    }
    
    if (changePasswordBtn) {
        changePasswordBtn.addEventListener('click', function() {
            if (window.notificationManager) {
                window.notificationManager.show('Password change form would open here', 'info');
            }
        });
    }
});
</script>
