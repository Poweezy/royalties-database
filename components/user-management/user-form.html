<!-- User Form Component -->
<div class="user-form" id="user-form-container" style="display: none;">
  <div class="section-header">
    <h4 id="form-title"><i class="fas fa-user-plus"></i> Add New User</h4>
    <button class="btn btn-secondary btn-sm" id="close-user-form">
      <i class="fas fa-times"></i> Close
    </button>
  </div>

  <form id="user-form" class="needs-validation" novalidate>
    <input type="hidden" id="user-id" name="userId">
    
    <!-- Personal Information Section -->
    <div class="form-section">
      <h5><i class="fas fa-user"></i> Personal Information</h5>
      <div class="grid-2">
        <div class="form-group">
          <label for="username">Username*</label>
          <input type="text" class="form-control" id="username" name="username" required
                 pattern="^[a-zA-Z0-9_-]{3,20}$">
          <div class="invalid-feedback">
            Username must be 3-20 characters and may contain letters, numbers, underscore, and hyphen.
          </div>
        </div>
        
        <div class="form-group">
          <label for="email">Email Address*</label>
          <input type="email" class="form-control" id="email" name="email" required>
          <div class="invalid-feedback">
            Please enter a valid email address.
          </div>
        </div>
      </div>

      <div class="grid-2">
        <div class="form-group">
          <label for="firstName">First Name*</label>
          <input type="text" class="form-control" id="firstName" name="firstName" required>
          <div class="invalid-feedback">
            First name is required.
          </div>
        </div>
        
        <div class="form-group">
          <label for="lastName">Last Name*</label>
          <input type="text" class="form-control" id="lastName" name="lastName" required>
          <div class="invalid-feedback">
            Last name is required.
          </div>
        </div>
      </div>
    </div>

    <!-- Account Settings Section -->
    <div class="form-section">
      <h5><i class="fas fa-user-shield"></i> Account Settings</h5>
      <div class="grid-2">
        <div class="form-group">
          <label for="role">User Role*</label>
          <select class="form-control" id="role" name="role" required>
            <option value="">Select Role</option>
            <option value="administrator">Administrator</option>
            <option value="editor">Editor</option>
            <option value="auditor">Auditor</option>
            <option value="finance">Finance Officer</option>
            <option value="viewer">Viewer</option>
          </select>
          <div class="invalid-feedback">
            Please select a user role.
          </div>
        </div>

        <div class="form-group">
          <label for="department">Department*</label>
          <select class="form-control" id="department" name="department" required>
            <option value="">Select Department</option>
            <option value="management">Management</option>
            <option value="finance">Finance</option>
            <option value="licensing">Licensing</option>
            <option value="it">IT</option>
            <option value="audit">Audit</option>
          </select>
          <div class="invalid-feedback">
            Please select a department.
          </div>
        </div>
      </div>

      <div class="grid-2">
        <div class="form-group">
          <label for="status">Account Status*</label>
          <select class="form-control" id="status" name="status" required>
            <option value="active">Active</option>
            <option value="inactive">Inactive</option>
            <option value="locked">Locked</option>
          </select>
          <div class="invalid-feedback">
            Please select an account status.
          </div>
        </div>

        <div class="form-group">
          <label for="2fa">Two-Factor Authentication</label>
          <select class="form-control" id="2fa" name="2fa">
            <option value="disabled">Disabled</option>
            <option value="email">Email</option>
            <option value="authenticator">Authenticator App</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Password Section (for new users) -->
    <div class="form-section" id="password-section">
      <h5><i class="fas fa-key"></i> Password</h5>
      <div class="grid-2">
        <div class="form-group">
          <label for="password">Password*</label>
          <div class="password-input">
            <input type="password" class="form-control" id="password" name="password" 
                   pattern="^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]{8,}$">
            <button type="button" class="btn btn-link toggle-password" data-target="password">
              <i class="fas fa-eye"></i>
            </button>
          </div>
          <div class="invalid-feedback">
            Password must be at least 8 characters long and include letters, numbers, and special characters.
          </div>
        </div>
        
        <div class="form-group">
          <label for="confirmPassword">Confirm Password*</label>
          <div class="password-input">
            <input type="password" class="form-control" id="confirmPassword" name="confirmPassword">
            <button type="button" class="btn btn-link toggle-password" data-target="confirmPassword">
              <i class="fas fa-eye"></i>
            </button>
          </div>
          <div class="invalid-feedback">
            Passwords do not match.
          </div>
        </div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <button type="button" class="btn btn-secondary" id="cancel-user-form">
        <i class="fas fa-times"></i> Cancel
      </button>
      <button type="submit" class="btn btn-primary" id="save-user">
        <i class="fas fa-save"></i> Save User
      </button>
    </div>
  </form>
</div>
