<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Notification Manager Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 40px;
            background: #f5f5f5;
        }
        .test-container {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 600px;
        }
        .test-section {
            margin-bottom: 2rem;
        }
        .test-section h3 {
            color: #333;
            margin-bottom: 1rem;
        }
        .btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .btn:hover {
            background: #2563eb;
        }
        .btn.success { background: #10b981; }
        .btn.warning { background: #f59e0b; }
        .btn.error { background: #ef4444; }
        .btn.info { background: #3b82f6; }
        .status {
            padding: 1rem;
            border-radius: 6px;
            margin: 1rem 0;
            font-weight: 500;
        }
        .status.pass {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #10b981;
        }
        .status.fail {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #ef4444;
        }
    </style>
</head>
<body>
    <!-- Load the enhanced notification system -->
    <script src="js/enhanced-notification-system.js"></script>
    
    <div class="test-container">
        <h1>üß™ Notification Manager Test</h1>
        <p>Testing the global notification manager availability and functionality.</p>
        
        <div class="test-section">
            <h3>üìã Availability Tests</h3>
            <div id="availability-status" class="status"></div>
            <div id="functionality-status" class="status"></div>
        </div>
        
        <div class="test-section">
            <h3>üéØ Functionality Tests</h3>
            <button class="btn success" onclick="testSuccess()">Test Success Notification</button>
            <button class="btn error" onclick="testError()">Test Error Notification</button>
            <button class="btn warning" onclick="testWarning()">Test Warning Notification</button>
            <button class="btn info" onclick="testInfo()">Test Info Notification</button>
            <button class="btn" onclick="testMultiple()">Test Multiple Notifications</button>
        </div>
        
        <div class="test-section">
            <h3>üîß Method Tests</h3>
            <button class="btn" onclick="testDirectMethods()">Test Direct Methods</button>
            <button class="btn" onclick="testCustomDuration()">Test Custom Duration</button>
        </div>
        
        <div class="test-section">
            <h3>üìä Test Results</h3>
            <div id="test-results"></div>
        </div>
    </div>
    
    <script>
        // Test results container
        const resultsContainer = document.getElementById('test-results');
        let testCount = 0;
        let passCount = 0;
        
        function logResult(test, status, message) {
            testCount++;
            if (status === 'pass') passCount++;
            
            const result = document.createElement('div');
            result.className = `status ${status}`;
            result.innerHTML = `<strong>${test}:</strong> ${message}`;
            resultsContainer.appendChild(result);
        }
        
        // Run availability tests immediately
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(runAvailabilityTests, 100);
        });
        
        function runAvailabilityTests() {
            const availabilityEl = document.getElementById('availability-status');
            const functionalityEl = document.getElementById('functionality-status');
            
            // Test 1: Check if window.notificationManager exists
            if (window.notificationManager) {
                availabilityEl.className = 'status pass';
                availabilityEl.innerHTML = '‚úÖ <strong>PASS:</strong> window.notificationManager is available';
                logResult('Global Availability', 'pass', 'window.notificationManager found');
            } else {
                availabilityEl.className = 'status fail';
                availabilityEl.innerHTML = '‚ùå <strong>FAIL:</strong> window.notificationManager not found';
                logResult('Global Availability', 'fail', 'window.notificationManager not found');
                return;
            }
            
            // Test 2: Check if show method exists
            if (typeof window.notificationManager.show === 'function') {
                functionalityEl.className = 'status pass';
                functionalityEl.innerHTML = '‚úÖ <strong>PASS:</strong> notificationManager.show() method available';
                logResult('Show Method', 'pass', 'show() method is callable');
            } else {
                functionalityEl.className = 'status fail';
                functionalityEl.innerHTML = '‚ùå <strong>FAIL:</strong> notificationManager.show() method not found';
                logResult('Show Method', 'fail', 'show() method not found');
            }
            
            // Test 3: Check for enhanced notification system methods
            const hasEnhancedMethods = 
                typeof window.notificationManager.success === 'function' &&
                typeof window.notificationManager.error === 'function' &&
                typeof window.notificationManager.warning === 'function' &&
                typeof window.notificationManager.info === 'function';
                
            if (hasEnhancedMethods) {
                logResult('Enhanced Methods', 'pass', 'Success, error, warning, info methods available');
            } else {
                logResult('Enhanced Methods', 'fail', 'Enhanced convenience methods not found');
            }
        }
        
        function testSuccess() {
            if (window.notificationManager) {
                window.notificationManager.show('This is a success notification!', 'success', 3000);
                logResult('Success Notification', 'pass', 'Success notification displayed');
            }
        }
        
        function testError() {
            if (window.notificationManager) {
                window.notificationManager.show('This is an error notification!', 'error', 3000);
                logResult('Error Notification', 'pass', 'Error notification displayed');
            }
        }
        
        function testWarning() {
            if (window.notificationManager) {
                window.notificationManager.show('This is a warning notification!', 'warning', 3000);
                logResult('Warning Notification', 'pass', 'Warning notification displayed');
            }
        }
        
        function testInfo() {
            if (window.notificationManager) {
                window.notificationManager.show('This is an info notification!', 'info', 3000);
                logResult('Info Notification', 'pass', 'Info notification displayed');
            }
        }
        
        function testMultiple() {
            if (window.notificationManager) {
                window.notificationManager.show('First notification', 'info', 2000);
                setTimeout(() => window.notificationManager.show('Second notification', 'success', 2000), 200);
                setTimeout(() => window.notificationManager.show('Third notification', 'warning', 2000), 400);
                logResult('Multiple Notifications', 'pass', 'Multiple notifications displayed');
            }
        }
        
        function testDirectMethods() {
            if (window.notificationManager) {
                if (typeof window.notificationManager.success === 'function') {
                    window.notificationManager.success('Direct success method!');
                    logResult('Direct Success Method', 'pass', 'Direct success() method works');
                } else {
                    logResult('Direct Success Method', 'fail', 'Direct success() method not available');
                }
            }
        }
        
        function testCustomDuration() {
            if (window.notificationManager) {
                window.notificationManager.show('This notification will stay for 1 second only', 'info', 1000);
                logResult('Custom Duration', 'pass', 'Custom duration (1 second) applied');
            }
        }
        
        // Update test summary every few seconds
        setInterval(() => {
            if (testCount > 0) {
                document.title = `Notification Test: ${passCount}/${testCount} passed`;
            }
        }, 1000);
    </script>
</body>
</html>
